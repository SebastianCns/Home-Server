@page "/edit-user/{userId:int}"
@attribute [Authorize(Roles = "Admin, User")]

@using Home_Server.Models
@inject NavigationManager navigationManager;
@inject Home_Server.Data.UserService userService;

<h1>Edit User</h1>
<AddEditUser CurrentUser="_user" OnSaveEvent="SaveUserEdit"></AddEditUser>

@code {
    /*Author: SebastianCns Date: 25.01.23
    *
    *Description:
    *This code edit an existing user
    *
    */
    [Parameter]
    public int UserId { get; set; }

    private UserModel _user; 

    protected override void OnInitialized()
    {
        _user = userService.GetUser(UserId);
        base.OnInitialized();
    }

    private void SaveUserEdit()
    {
        userService.EditUser(_user);
        navigationManager.NavigateTo("/settings");
    }
}
